# Week 2: å‰ç«¯æ‡’åŠ è½½é€‚é…è®¾è®¡æ–‡æ¡£

## ğŸ“‹ é¡¹ç›®æ¦‚è¿°

åŸºäº Week 1 å®Œæˆçš„åç«¯æ€§èƒ½ä¼˜åŒ–æ”¹é€ ï¼ŒWeek 2 å°†å®ç°å‰ç«¯çš„æ‡’åŠ è½½æœºåˆ¶ï¼Œä½¿å‰ç«¯èƒ½å¤Ÿæ™ºèƒ½æ£€æµ‹é…ç½®æ ¼å¼å¹¶æŒ‰éœ€åŠ è½½æ•°æ®ï¼Œæå‡ç”¨æˆ·ä½“éªŒå’Œé¡µé¢æ€§èƒ½ã€‚

## ğŸ¯ è®¾è®¡ç›®æ ‡

### æ ¸å¿ƒç›®æ ‡
1. **æ™ºèƒ½é…ç½®æ£€æµ‹** - è‡ªåŠ¨è¯†åˆ«ä¼ ç»Ÿæ ¼å¼ vs ä¼˜åŒ–æ ¼å¼
2. **æ— ç¼å…¼å®¹æ€§** - æ”¯æŒä¸¤ç§é…ç½®æ ¼å¼ï¼Œç”¨æˆ·æ— æ„ŸçŸ¥åˆ‡æ¢
3. **æŒ‰éœ€åŠ è½½** - åªåœ¨ç”¨æˆ·ç‚¹å‡»æ—¶åŠ è½½åˆ†ç±»æ•°æ®
4. **æ€§èƒ½ä¼˜åŒ–** - ç¼“å­˜æœºåˆ¶ã€é¢„åŠ è½½ã€LoadingçŠ¶æ€
5. **ç”¨æˆ·ä½“éªŒ** - æµç•…çš„äº¤äº’ï¼Œæ¸…æ™°çš„åŠ è½½åé¦ˆ

### æ€§èƒ½æŒ‡æ ‡
- é¦–æ¬¡åŠ è½½æ—¶é—´å‡å°‘ 60-80%
- åˆ†ç±»åˆ‡æ¢å“åº”æ—¶é—´ < 200ms
- ç¼“å­˜å‘½ä¸­ç‡ > 90%
- é”™è¯¯é‡è¯•æˆåŠŸç‡ > 95%

## ğŸ—ï¸ ç³»ç»Ÿæ¶æ„è®¾è®¡

### æ•´ä½“æ¶æ„
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    å‰ç«¯æ‡’åŠ è½½ç³»ç»Ÿ                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  UIå±‚                                                       â”‚
â”‚  â”œâ”€â”€ é¡µé¢ç»„ä»¶ (Index.astro, ConfigDemo.astro)               â”‚
â”‚  â”œâ”€â”€ å¯¼èˆªç»„ä»¶ (Sidebar, NavCard)                           â”‚
â”‚  â””â”€â”€ åŠ è½½çŠ¶æ€ç»„ä»¶ (LoadingSpinner, ErrorBoundary)           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ä¸šåŠ¡é€»è¾‘å±‚                                                  â”‚
â”‚  â”œâ”€â”€ é…ç½®ç®¡ç†å™¨ (ConfigManager)                             â”‚
â”‚  â”œâ”€â”€ æ‡’åŠ è½½ç®¡ç†å™¨ (LazyLoadManager)                         â”‚
â”‚  â””â”€â”€ ç¼“å­˜ç®¡ç†å™¨ (CacheManager)                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  æ•°æ®è®¿é—®å±‚                                                  â”‚
â”‚  â”œâ”€â”€ é…ç½®åŠ è½½å™¨ (ConfigLoader)                              â”‚
â”‚  â”œâ”€â”€ åˆ†ç±»åŠ è½½å™¨ (CategoryLoader)                            â”‚
â”‚  â””â”€â”€ ç½‘ç»œè¯·æ±‚å±‚ (HttpClient)                                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  å­˜å‚¨å±‚                                                      â”‚
â”‚  â”œâ”€â”€ å†…å­˜ç¼“å­˜ (MemoryCache)                                 â”‚
â”‚  â”œâ”€â”€ æœ¬åœ°å­˜å‚¨ (LocalStorage)                                â”‚
â”‚  â””â”€â”€ ä¼šè¯å­˜å‚¨ (SessionStorage)                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### æ•°æ®æµè®¾è®¡
```
ç”¨æˆ·è®¿é—®é¡µé¢
    â†“
åŠ è½½ä¸»é…ç½®æ–‡ä»¶ (config.json)
    â†“
æ£€æµ‹é…ç½®æ ¼å¼ (ä¼ ç»Ÿ vs ä¼˜åŒ–)
    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   ä¼ ç»Ÿæ ¼å¼       â”‚    ä¼˜åŒ–æ ¼å¼      â”‚
â”‚   ç›´æ¥æ¸²æŸ“       â”‚    æ‡’åŠ è½½æ¨¡å¼    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â†“
              ç”¨æˆ·ç‚¹å‡»åˆ†ç±»
                      â†“
              æ£€æŸ¥ç¼“å­˜
                      â†“
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚  ç¼“å­˜å‘½ä¸­    â”‚   ç¼“å­˜æœªå‘½ä¸­  â”‚
        â”‚  ç›´æ¥ä½¿ç”¨    â”‚   ç½‘ç»œè¯·æ±‚   â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â†“
              æ›´æ–°UI + ç¼“å­˜
                      â†“
              é¢„åŠ è½½ä¸‹ä¸€ä¸ªåˆ†ç±»
```

## ğŸ”§ æ ¸å¿ƒç»„ä»¶è®¾è®¡

### 1. ConfigManager (é…ç½®ç®¡ç†å™¨)
```typescript
class ConfigManager {
  // æ ¸å¿ƒåŠŸèƒ½
  - detectConfigFormat(): ConfigFormat
  - loadConfig(): Promise<UnifiedConfig>
  - getMenuItems(): UnifiedMenuItem[]
  - isOptimizedMode(): boolean
  
  // çŠ¶æ€ç®¡ç†
  - currentConfig: UnifiedConfig
  - configFormat: 'traditional' | 'optimized'
  - loadingState: LoadingState
}
```

### 2. LazyLoadManager (æ‡’åŠ è½½ç®¡ç†å™¨)
```typescript
class LazyLoadManager {
  // æ‡’åŠ è½½æ ¸å¿ƒ
  - loadCategory(categoryIndex: number): Promise<CategoryData>
  - preloadCategory(categoryIndex: number): void
  - getCachedCategory(categoryIndex: number): CategoryData | null
  
  // çŠ¶æ€ç®¡ç†
  - loadingStates: Map<number, LoadingState>
  - loadedCategories: Map<number, CategoryData>
  - preloadQueue: number[]
}
```

### 3. CacheManager (ç¼“å­˜ç®¡ç†å™¨)
```typescript
class CacheManager {
  // ç¼“å­˜æ“ä½œ
  - set(key: string, data: any, ttl?: number): void
  - get(key: string): any | null
  - clear(): void
  - cleanup(): void
  
  // ç¼“å­˜ç­–ç•¥
  - memoryCache: Map<string, CacheItem>
  - persistentCache: LocalStorage
  - maxSize: number
  - defaultTTL: number
}
```

## ğŸ“± ç”¨æˆ·ç•Œé¢è®¾è®¡

### LoadingçŠ¶æ€è®¾è®¡
```typescript
// åŠ è½½çŠ¶æ€ç±»å‹
type LoadingState = 'idle' | 'loading' | 'success' | 'error'

// UIçŠ¶æ€æ˜ å°„
const LoadingUI = {
  idle: 'æ­£å¸¸æ˜¾ç¤º',
  loading: 'éª¨æ¶å± + åŠ è½½åŠ¨ç”»',
  success: 'æ•°æ®æ¸²æŸ“',
  error: 'é”™è¯¯æç¤º + é‡è¯•æŒ‰é’®'
}
```

### äº¤äº’æµç¨‹è®¾è®¡
1. **é¦–æ¬¡è®¿é—®**
   - æ˜¾ç¤ºä¸»é…ç½®åŠ è½½åŠ¨ç”»
   - æ£€æµ‹é…ç½®æ ¼å¼
   - æ¸²æŸ“èœå•ç»“æ„ï¼ˆä¼˜åŒ–æ¨¡å¼æ˜¾ç¤ºé¢„è§ˆæ•°æ®ï¼‰

2. **åˆ†ç±»ç‚¹å‡»**
   - ç«‹å³æ˜¾ç¤ºLoadingçŠ¶æ€
   - æ£€æŸ¥ç¼“å­˜
   - åŠ è½½æ•°æ®æˆ–ä½¿ç”¨ç¼“å­˜
   - æ¸²æŸ“å®Œæ•´æ•°æ®
   - å¯åŠ¨é¢„åŠ è½½

3. **é”™è¯¯å¤„ç†**
   - ç½‘ç»œé”™è¯¯ï¼šæ˜¾ç¤ºé‡è¯•æŒ‰é’®
   - æ•°æ®é”™è¯¯ï¼šæ˜¾ç¤ºé”™è¯¯ä¿¡æ¯
   - è¶…æ—¶é”™è¯¯ï¼šè‡ªåŠ¨é‡è¯•

## ğŸš€ æ€§èƒ½ä¼˜åŒ–ç­–ç•¥

### 1. ç¼“å­˜ç­–ç•¥
```typescript
// å¤šå±‚ç¼“å­˜è®¾è®¡
const CacheStrategy = {
  L1: 'MemoryCache (æœ€å¿«ï¼Œä¼šè¯çº§)',
  L2: 'SessionStorage (é¡µé¢çº§)',
  L3: 'LocalStorage (æŒä¹…åŒ–)',
  
  // ç¼“å­˜ä¼˜å…ˆçº§
  priority: ['memory', 'session', 'local', 'network']
}
```

### 2. é¢„åŠ è½½ç­–ç•¥
```typescript
// æ™ºèƒ½é¢„åŠ è½½
const PreloadStrategy = {
  // åŸºç¡€é¢„åŠ è½½
  nextCategory: 'é¢„åŠ è½½ä¸‹ä¸€ä¸ªåˆ†ç±»',
  
  // æ™ºèƒ½é¢„åŠ è½½
  popularCategories: 'é¢„åŠ è½½çƒ­é—¨åˆ†ç±»',
  userBehavior: 'åŸºäºç”¨æˆ·è¡Œä¸ºé¢„æµ‹',
  
  // é¢„åŠ è½½æ—¶æœº
  timing: ['ç”¨æˆ·hover', 'ç©ºé—²æ—¶é—´', 'ç½‘ç»œç©ºé—²']
}
```

### 3. ç½‘ç»œä¼˜åŒ–
```typescript
// è¯·æ±‚ä¼˜åŒ–
const NetworkOptimization = {
  // è¯·æ±‚åˆå¹¶
  batchRequests: 'æ‰¹é‡è¯·æ±‚å¤šä¸ªåˆ†ç±»',
  
  // è¯·æ±‚ä¼˜å…ˆçº§
  priority: 'ç”¨æˆ·ç‚¹å‡» > é¢„åŠ è½½ > åå°æ›´æ–°',
  
  // è¶…æ—¶å’Œé‡è¯•
  timeout: '5ç§’è¶…æ—¶',
  retry: 'æŒ‡æ•°é€€é¿é‡è¯•'
}
```

## ğŸ“Š ç›‘æ§å’Œåˆ†æ

### æ€§èƒ½æŒ‡æ ‡
```typescript
// å…³é”®æŒ‡æ ‡
const PerformanceMetrics = {
  // åŠ è½½æ€§èƒ½
  configLoadTime: 'é…ç½®åŠ è½½æ—¶é—´',
  categoryLoadTime: 'åˆ†ç±»åŠ è½½æ—¶é—´',
  cacheHitRate: 'ç¼“å­˜å‘½ä¸­ç‡',
  
  // ç”¨æˆ·ä½“éªŒ
  firstContentfulPaint: 'é¦–æ¬¡å†…å®¹ç»˜åˆ¶',
  timeToInteractive: 'å¯äº¤äº’æ—¶é—´',
  userEngagement: 'ç”¨æˆ·å‚ä¸åº¦',
  
  // é”™è¯¯ç›‘æ§
  errorRate: 'é”™è¯¯ç‡',
  retrySuccessRate: 'é‡è¯•æˆåŠŸç‡'
}
```

### æ•°æ®æ”¶é›†
```typescript
// åŸ‹ç‚¹è®¾è®¡
const Analytics = {
  // é¡µé¢äº‹ä»¶
  pageLoad: 'é¡µé¢åŠ è½½',
  configDetection: 'é…ç½®æ£€æµ‹',
  
  // ç”¨æˆ·è¡Œä¸º
  categoryClick: 'åˆ†ç±»ç‚¹å‡»',
  siteClick: 'ç½‘ç«™ç‚¹å‡»',
  searchUsage: 'æœç´¢ä½¿ç”¨',
  
  // æ€§èƒ½äº‹ä»¶
  cacheHit: 'ç¼“å­˜å‘½ä¸­',
  networkRequest: 'ç½‘ç»œè¯·æ±‚',
  errorOccurred: 'é”™è¯¯å‘ç”Ÿ'
}
```

## ğŸ”„ å…¼å®¹æ€§è®¾è®¡

### å‘åå…¼å®¹
```typescript
// å…¼å®¹æ€§ä¿è¯
const Compatibility = {
  // é…ç½®æ ¼å¼
  traditional: 'å®Œå…¨æ”¯æŒä¼ ç»Ÿæ ¼å¼',
  optimized: 'å®Œå…¨æ”¯æŒä¼˜åŒ–æ ¼å¼',
  mixed: 'æ”¯æŒæ··åˆéƒ¨ç½²',
  
  // APIå…¼å®¹
  existingComponents: 'ç°æœ‰ç»„ä»¶æ— éœ€ä¿®æ”¹',
  gradualMigration: 'æ”¯æŒæ¸è¿›å¼è¿ç§»'
}
```

### é™çº§ç­–ç•¥
```typescript
// é™çº§æ–¹æ¡ˆ
const FallbackStrategy = {
  // ç½‘ç»œé™çº§
  networkError: 'ä½¿ç”¨ç¼“å­˜æ•°æ®',
  
  // åŠŸèƒ½é™çº§
  lazyLoadError: 'å›é€€åˆ°ä¼ ç»Ÿæ¨¡å¼',
  
  // æµè§ˆå™¨é™çº§
  oldBrowser: 'ç¦ç”¨é«˜çº§åŠŸèƒ½'
}
```

## ğŸ“‹ å®æ–½è®¡åˆ’

### Phase 1: åŸºç¡€æ¶æ„ (2-3å¤©)
- [ ] å®Œå–„ConfigManagerè®¾è®¡
- [ ] å®ç°LazyLoadManager
- [ ] åˆ›å»ºCacheManager
- [ ] è®¾è®¡ç»Ÿä¸€çš„ç±»å‹ç³»ç»Ÿ

### Phase 2: æ ¸å¿ƒåŠŸèƒ½ (3-4å¤©)
- [ ] å®ç°é…ç½®æ ¼å¼æ£€æµ‹
- [ ] å®ç°æ‡’åŠ è½½é€»è¾‘
- [ ] å®ç°ç¼“å­˜æœºåˆ¶
- [ ] æ·»åŠ é”™è¯¯å¤„ç†

### Phase 3: ç”¨æˆ·ä½“éªŒ (2-3å¤©)
- [ ] å®ç°LoadingçŠ¶æ€
- [ ] æ·»åŠ é¢„åŠ è½½åŠŸèƒ½
- [ ] ä¼˜åŒ–äº¤äº’åŠ¨ç”»
- [ ] å®Œå–„é”™è¯¯æç¤º

### Phase 4: æ€§èƒ½ä¼˜åŒ– (1-2å¤©)
- [ ] æ€§èƒ½ç›‘æ§
- [ ] ç¼“å­˜ä¼˜åŒ–
- [ ] ç½‘ç»œä¼˜åŒ–
- [ ] ä»£ç åˆ†å‰²

### Phase 5: æµ‹è¯•å’Œéƒ¨ç½² (1-2å¤©)
- [ ] å•å…ƒæµ‹è¯•
- [ ] é›†æˆæµ‹è¯•
- [ ] æ€§èƒ½æµ‹è¯•
- [ ] ç”Ÿäº§éƒ¨ç½²

## ğŸ§ª æµ‹è¯•ç­–ç•¥

### å•å…ƒæµ‹è¯•
- ConfigManager å„æ–¹æ³•æµ‹è¯•
- LazyLoadManager åŠ è½½é€»è¾‘æµ‹è¯•
- CacheManager ç¼“å­˜ç­–ç•¥æµ‹è¯•

### é›†æˆæµ‹è¯•
- é…ç½®æ ¼å¼æ£€æµ‹å‡†ç¡®æ€§
- æ‡’åŠ è½½å®Œæ•´æµç¨‹
- ç¼“å­˜å’Œé¢„åŠ è½½åä½œ

### æ€§èƒ½æµ‹è¯•
- ä¸åŒé…ç½®å¤§å°çš„åŠ è½½æ€§èƒ½
- ç¼“å­˜å‘½ä¸­ç‡æµ‹è¯•
- ç½‘ç»œå¼‚å¸¸æƒ…å†µæµ‹è¯•

### ç”¨æˆ·ä½“éªŒæµ‹è¯•
- ä¸åŒç½‘ç»œç¯å¢ƒä¸‹çš„ä½“éªŒ
- ç§»åŠ¨è®¾å¤‡é€‚é…
- æ— éšœç¢è®¿é—®æ”¯æŒ

---

## ğŸ“ æ€»ç»“

Week 2 çš„å‰ç«¯é€‚é…è®¾è®¡ä»¥**æ¸è¿›å¼å¢å¼º**ä¸ºæ ¸å¿ƒç†å¿µï¼Œç¡®ä¿åœ¨æä¾›å…ˆè¿›æ‡’åŠ è½½åŠŸèƒ½çš„åŒæ—¶ï¼Œä¿æŒä¸ç°æœ‰ç³»ç»Ÿçš„å®Œå…¨å…¼å®¹ã€‚é€šè¿‡æ™ºèƒ½çš„é…ç½®æ£€æµ‹ã€é«˜æ•ˆçš„ç¼“å­˜ç­–ç•¥å’Œä¼˜é›…çš„ç”¨æˆ·ä½“éªŒè®¾è®¡ï¼Œå®ç°çœŸæ­£çš„æ€§èƒ½æå‡å’Œç”¨æˆ·ä½“éªŒä¼˜åŒ–ã€‚

ä¸‹ä¸€æ­¥å°†æŒ‰ç…§æ­¤è®¾è®¡æ–‡æ¡£é€æ­¥å®æ–½å„ä¸ªç»„ä»¶å’ŒåŠŸèƒ½æ¨¡å—ã€‚
